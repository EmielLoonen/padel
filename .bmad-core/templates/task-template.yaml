template:
  id: task-template-v1
  name: BMad Task Template
  version: 1.0
  output:
    format: markdown
    filename: "bmad-core/tasks/{{task_id}}.md"
    title: "{{task_name}} - BMad Task"

workflow:
  mode: interactive
  elicitation: advanced-elicitation

sections:
  - id: task-header
    title: Task Header
    instruction: |
      Generate the task header with title and description following BMad task formatting standards.
      Use clear, imperative language and ensure the description explains the task's purpose concisely.
    content: |
      # {{task_name}}

      {{task_description}}

  - id: task-purpose
    title: Task Purpose
    instruction: |
      Define the purpose and context of the task.
    sections:
      - id: purpose
        title: Purpose
        type: paragraph
        instruction: Explain what this task accomplishes and why it's needed. Emphasize adherence to BMad task writing rules - use imperative language, make steps executable, and focus on specific outcomes.
      - id: context
        title: Context
        type: paragraph
        instruction: Describe when and how this task should be used

  - id: task-requirements
    title: Requirements and Prerequisites
    instruction: |
      Define any requirements or prerequisites for the task.
    sections:
      - id: prerequisites
        title: Prerequisites
        type: bullet-list
        instruction: List any prerequisites or dependencies required before running this task
      - id: inputs
        title: Required Inputs
        type: bullet-list
        instruction: List all required inputs or parameters for the task

  - id: task-workflow
    title: Task Workflow
    instruction: |
      Define the step-by-step workflow for the task. Follow BMad task writing rules:
      - Use imperative language
      - Make steps executable and specific
      - Include validation steps
      - Add elicitation when user input is required
    sections:
      - id: workflow-steps
        title: Workflow Steps
        type: numbered-list
        instruction: |
          Create a numbered list of executable steps following BMad task writing rules. Each step should be:
          - Clear and actionable (use imperative verbs: "Create", "Validate", "Execute")
          - Specific with concrete outcomes and deliverables
          - Include validation checkpoints where needed
          - Use proper elicitation format for user interaction: numbered options (1-9) with clear selection prompts
          - Follow BMad elicitation patterns: "Select option:" followed by numbered choices

  - id: task-validation
    title: Validation and Quality Assurance
    instruction: |
      Define validation steps and quality criteria.
    sections:
      - id: validation-steps
        title: Validation Steps
        type: numbered-list
        instruction: List steps to validate the task was completed successfully
      - id: quality-criteria
        title: Quality Criteria
        type: bullet-list
        instruction: Define what constitutes successful completion of this task

  - id: task-outputs
    title: Expected Outputs
    instruction: |
      Define what outputs this task produces.
    sections:
      - id: outputs
        title: Outputs
        type: bullet-list
        instruction: List all files, documents, or artifacts this task creates or modifies
      - id: deliverables
        title: Deliverables
        type: bullet-list
        instruction: List the key deliverables that indicate task completion

elicitation:
  - id: task_id
    type: input
    prompt: "What is the task ID (e.g., 'create-agent', 'validate-structure')?"
    variable: task_id
    required: true
    validation: "^[a-z][a-z0-9-]*$"

  - id: task_name
    type: input
    prompt: "What is the task name (e.g., 'Create BMad Agent', 'Validate Repository Structure')?"
    variable: task_name
    required: true

  - id: task_description
    type: textarea
    prompt: "Provide a brief description of what this task does:"
    variable: task_description
    required: true

  - id: task_purpose
    type: textarea
    prompt: "What is the purpose of this task and why is it needed?"
    variable: task_purpose
    required: true

  - id: task_context
    type: textarea
    prompt: "When and how should this task be used? What's the context?"
    variable: task_context
    required: true

  - id: prerequisites
    type: textarea
    prompt: "What are the prerequisites for this task (one per line, optional)?"
    variable: prerequisites
    required: false

  - id: required_inputs
    type: textarea
    prompt: "What inputs are required for this task (one per line)?"
    variable: required_inputs
    required: true

  - id: workflow_steps
    type: textarea
    prompt: "What are the step-by-step instructions for this task (one step per line)?"
    variable: workflow_steps
    required: true

  - id: validation_steps
    type: textarea
    prompt: "How should the task completion be validated (one step per line)?"
    variable: validation_steps
    required: true

  - id: quality_criteria
    type: textarea
    prompt: "What are the quality criteria for successful completion (one per line)?"
    variable: quality_criteria
    required: true

  - id: expected_outputs
    type: textarea
    prompt: "What files or artifacts does this task create/modify (one per line)?"
    variable: expected_outputs
    required: true

  - id: key_deliverables
    type: textarea
    prompt: "What are the key deliverables that indicate completion (one per line)?"
    variable: key_deliverables
    required: true

  - id: elicitation_required
    type: select
    prompt: "Does this task require user interaction/elicitation?"
    options:
      - value: "yes"
        label: "Yes - Task requires user input during execution"
      - value: "no"
        label: "No - Task can run without user interaction"
    variable: elicitation_required
    required: true
