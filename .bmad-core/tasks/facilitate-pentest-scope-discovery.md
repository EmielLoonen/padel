# Facilitate Pentest Scope Discovery

## Objective
Guide Product Managers, Engineering Managers, and security teams through a structured penetration testing scope discovery session to define the testing boundaries, prioritize features, and ensure comprehensive security coverage for LTS releases.

## Context
Backbase releases LTS versions twice a year as part of the Backbase SDLC, which includes Threat Modeling and External Penetration Testing. Penetration tests can be:
- **External**: Third-party vendor using grey-box approach (with login credentials)
- **Internal**: Team Spectre using white-box approach (with source code access)

## Prerequisites
- LTS release version identified
- Product roadmap and feature inventory available
- Previous pentest reports and findings accessible
- Key stakeholders assembled (PMs, EMs, Security Engineers, QAs)
- Understanding of current environment setup

## Stakeholder Roles

### Primary Participants
- **Product Managers (PMs)**: Feature ownership and business context
- **Engineering Managers (EMs)**: Technical implementation details
- **Application Security Engineer**: Security requirements and compliance
- **QA Representatives**: Testing scenarios and user flows
- **DevOps/Team Atlas**: Environment and deployment considerations

### Supporting Roles
- **Mobile Team**: Mobile app specific considerations
- **Team Spectre**: Internal security testing expertise

## Scope Discovery Process

### 1. Pre-Session Preparation

#### Gather Essential Information
- [ ] Previous LTS version and pentest scope
- [ ] Current LTS version features and capabilities
- [ ] Feature release timeline since last pentest
- [ ] Known limitations and exclusions from previous tests
- [ ] Environment availability and constraints

#### Review Historical Context
- [ ] Previous pentest findings and remediation status
- [ ] Known pentest limitations (e.g., mobile app obfuscation, IDOR issues)
- [ ] Changes in security posture since last test

### 2. Scope Definition Workshop

#### Primary Inclusion Criteria
Guide discussion around features that **MUST** be included:

1. **New Capabilities/Features**
   - Features released for the first time since last LTS
   - Capabilities with significant changes since previous LTS version
   - Previously untested features

2. **End-to-End Functionality**
   - Web application features with complete user flows
   - Mobile application features (both iOS and Android)
   - Cross-platform integrations

3. **User Interface Requirements**
   - Only features with accessible UI components
   - Features demonstrable through ModelBank environment
   - Interactive capabilities that users can execute

#### Primary Exclusion Criteria
Clearly identify what should **NOT** be included:

1. **Legacy Features**
   - Features released before previous LTS version
   - Already tested capabilities without significant changes

2. **Technical Limitations**
   - Mocked functionalities (automatically out of scope)
   - Features without UI components
   - Backend-only services without user interaction

3. **Environment Constraints**
   - Features not available in ModelBank environment
   - Capabilities requiring special setup not feasible for pentest

### 3. Feature Inventory and Prioritization

#### Create Comprehensive Feature List
For each identified feature, capture:
- **Feature Name**: Clear identification
- **Description**: Functional overview
- **Release Version**: When it was introduced/modified
- **Platform**: Web, Mobile (iOS/Android), or Both
- **User Flow**: Key interaction patterns
- **Business Impact**: Criticality level
- **Security Sensitivity**: Data handling, authentication, authorization

#### Risk-Based Prioritization
Evaluate features based on:
- **Attack Surface**: External interfaces and data inputs
- **Data Sensitivity**: PII, financial data, credentials
- **Business Criticality**: Core banking functions vs. peripheral features
- **Change Magnitude**: Extent of modifications since last test

### 4. Environment and Access Requirements

#### Technical Scope Definition
- [ ] **Environment Selection**: Dedicated pentest environment (rndbb-sec)
- [ ] **Version Verification**: Latest LTS version deployment
- [ ] **Access Levels**: User roles and permissions needed
- [ ] **Data Requirements**: Test customers and employee accounts
- [ ] **Integration Points**: External systems and API endpoints

#### Mobile Application Considerations
- [ ] **App Variants Required**:
  - Android Dev (Security checks OFF)
  - Android Prod (Security checks ON)
  - iOS Dev (Security checks OFF)
  - iOS Prod (Security checks ON)
- [ ] **Distribution Method**: Zip file delivery or secure sharing
- [ ] **Testing Scenarios**: Mobile-specific user flows

### 5. Documentation and Guidance Requirements

#### Pentest Team Support Materials
- [ ] **User Journey Documentation**: Step-by-step capability usage
- [ ] **Test Scenarios**: Specific button clicks and workflows
- [ ] **Configuration Details**: Environment setup and access
- [ ] **Transaction Signing Process**: Authentication flow documentation
- [ ] **Known Issues**: Pre-existing limitations and workarounds

### 6. Validation and Sign-off

#### Scope Validation Checklist
- [ ] All new/modified features since last LTS identified
- [ ] UI-accessible features confirmed in ModelBank
- [ ] Mocked functionalities properly excluded
- [ ] Mobile and web coverage balanced
- [ ] Business-critical flows prioritized
- [ ] Technical constraints acknowledged

#### Stakeholder Approval
- [ ] **PM Sign-off**: Business feature completeness
- [ ] **EM Sign-off**: Technical feasibility
- [ ] **Security Sign-off**: Risk coverage adequacy
- [ ] **QA Sign-off**: Testability and user flow validity

## Deliverables

### Primary Outputs
1. **Pentest Scope Document**: Detailed feature list with inclusion/exclusion rationale
2. **Prioritized Testing Matrix**: Risk-based feature prioritization
3. **Environment Requirements**: Technical setup specifications
4. **User Guide Documentation**: Capability usage instructions
5. **Mobile App Requirements**: Specific build and distribution needs

### Supporting Documentation
- **Stakeholder RACI Matrix**: Roles and responsibilities
- **Risk Assessment Summary**: Security impact analysis
- **Known Limitations List**: Pre-acknowledged constraints
- **Environment Verification Checklist**: Post-deployment validation steps

## Post-Discovery Actions

### Immediate Follow-up
- [ ] Document scope in Team Spectre pentest pages
- [ ] Coordinate environment deployment with Team Atlas/DevOps
- [ ] Schedule mobile app build creation
- [ ] Begin user guidance documentation
- [ ] Plan environment verification sessions

### Ongoing Coordination
- [ ] Daily check-up meetings during pentest execution
- [ ] Support channel establishment for real-time issues
- [ ] Findings documentation preparation
- [ ] Post-test remediation planning

## Success Criteria
- Comprehensive scope covering all LTS changes
- Clear inclusion/exclusion criteria documented
- All stakeholders aligned on testing boundaries
- Technical requirements feasible and documented
- Risk-appropriate feature prioritization completed

## Common Pitfalls to Avoid
- **Scope Creep**: Including previously tested features without justification
- **Technical Impossibilities**: Scoping features not available in test environment
- **Documentation Gaps**: Insufficient guidance for pentest execution
- **Stakeholder Misalignment**: Unclear responsibilities or expectations
- **Environment Assumptions**: Not validating technical feasibility early

## References
- [Secure SDLC Guidelines - External Penetration Testing](https://backbase.atlassian.net/wiki/spaces/SEC/pages/3615260909/Secure+SDLC+Guidelines#External-Penetration-Testing)
- [Production Hardening Guide](https://backbase.io/developers/documentation/security/overview/production-hardening-guide/)
- [External Penetration Testing - Team Spectre](https://backbase.atlassian.net/wiki/pages/createpage.action?spaceKey=SPCTR&title=External%20Penetration%20Testing)
